<!DOCTYPE html>
<html>
<head>
    <title>17 - Game example - ES6/WebGL 2.0 Examples</title>

    <link rel="stylesheet" type="text/css" href="../common/style.css">

    <script type="text/javascript" src="../lib/gl-matrix-min.js"></script>
    <script type="text/javascript" src="../lib/dat.gui.min.js"></script>
    <script type="module" src="game.js"></script>

    <script>
      function startTimer(duration, display) {

    var minTimer = duration, minutes, seconds;

    setInterval(function () {
        var visualTimer = document.getElementById('visual-timer')
        visualTimer.classList.add("width-change");

        minutes = parseInt(minTimer / 60)
        seconds = parseInt(minTimer % 60);

        seconds = seconds < 10 ? "0" + seconds : seconds;

        display.textContent = minutes + ":" + seconds;

        if (--minTimer < 0) {
            visualTimer.classList.remove("width-change");
            minTimer = duration
        }

    }, 1000);
}

window.onload = function () {
    var oneMin = 60 * 1,
        display = document.querySelector('#time');
    startTimer(oneMin, display);
};
setTimeout(function(){
 document.getElementById('ending').classList.remove('hide');
 }, 60000);

    </script>


</head>
<body>
    <div class="overlay">
        <div id="help">*if the pointer doesn't lock on load, please click on the canvas to lock it</div>
        <a class="back" href="../index.html">Back</a>
        <div id="visual-timer">
            <div id="timer-wrapper"><span id="time">1:00</span></div>
        </div>
        <div id="counter">0/3</div>
    </div>
    <div class="overlay-hint" id="interaction"></div>
     <!--<div>Oxygen runs out in <span id="time">01:00</span>!</div>-->
    <div class="fullscreen">
        <canvas></canvas>
        <div class="end hide" id="ending">
            <h1 class="lost" scrolling="no">YOU RAN OUT OF OXYGEN</h1>
        </div>
         <div class="end hide" id="winning">
            <h1 class="win" scrolling="no">YOU ESCAPED</h1>
        </div>
    </div>

</body>
</html>
